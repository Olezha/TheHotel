<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title th:text="#{project.title}"></title>
    <th:block th:include="fragments::css"/>
</head>
<body>

<th:block th:include="fragments::header"/>

<div class="container mt-3">
    <div id="availability-filter">
        <form th:action="@{__${#httpServletRequest.requestURI}__}" th:object="${filter}" method="post">
            <div class="form-row align-items-center">
                <div class="col-auto">
                    <label for="check-in-check-out">Check in - Check out</label>
                    <input th:field="*{checkInCheckOut}" type="text" class="form-control mb-2" id="check-in-check-out">
                </div>
                <div class="col-auto">
                    <label for="persons">Persons</label>
                    <select th:field="*{persons}" class="form-control mb-2" id="persons">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                    </select>
                </div>
                <div class="col-auto">
                    <button type="submit" class="btn btn-primary mb-2 mt-sm-4">Search</button>
                </div>
            </div>
        </form>
    </div>

    <div class="row mt-3" th:each="room:${allRooms}">
        <div th:include="fragments::room" th:with="room=${room}" class="col"></div>
    </div>
    <div class="row mt-3" th:each="room:${availableRooms}">
        <div th:include="fragments::room" th:with="room=${room}" class="col-10"></div>
        <div class="col">
            <form th:action="@{'/hotel/'+${hotelId}+'/room/'+${room.id}+'/reserve'}" th:object="${filter}"
                  method="post">
                <input th:field="*{checkInCheckOut}" type="hidden"/>
                <input th:field="*{persons}" type="hidden"/>
                <button type="submit" class="btn btn-primary mb-2 mt-sm-4">Reserve</button>
            </form>
        </div>
    </div>
</div>

<th:block th:include="fragments::js"/>
<script th:inline="javascript">
    $('#check-in-check-out').daterangepicker({
        "minDate": moment(),
        "locale": {
            "format": "DD/MM/YYYY",
            "separator": " - ",
            "applyLabel": /*[[#{apply}]]*/ "Apply",
            "cancelLabel": /*[[#{cancel}]]*/ "Cancel",
            "daysOfWeek": [
                /*[[#{Su}]]*/ "Su",
                /*[[#{Mo}]]*/ "Mo",
                /*[[#{Tu}]]*/ "Tu",
                /*[[#{We}]]*/ "We",
                /*[[#{Th}]]*/ "Th",
                /*[[#{Fr}]]*/ "Fr",
                /*[[#{Sa}]]*/ "Sa"
            ],
            "monthNames": [
                /*[[#{January}]]*/ "January",
                /*[[#{February}]]*/ "February",
                /*[[#{March}]]*/ "March",
                /*[[#{April}]]*/ "April",
                /*[[#{May}]]*/ "May",
                /*[[#{June}]]*/ "June",
                /*[[#{July}]]*/ "July",
                /*[[#{August}]]*/ "August",
                /*[[#{September}]]*/ "September",
                /*[[#{October}]]*/ "October",
                /*[[#{November}]]*/ "November",
                /*[[#{December}]]*/ "December"
            ],
            "firstDay": 1
        }
    });
</script>
</body>
</html>
